<!DOCTYPE html>
<html>
<body>
<h1>Paths to Global Happiness: Finding Joy in Unity</h1>
<p> In a world where countries strive for progress and prosperity, one essential aspect often overlooked is happiness. Welcome to the interactive journey through the World Happiness Report, where we'll explore the factors that contribute to the joy and well-being of nations. Together, let's uncover the secrets of happiness and discover how unity can lead us to a brighter, happier world.</p>
<meta charset="utf-8">

<script src="https://d3js.org/d3.v4.js"></script>

<div id="my_dataviz"></div>
<button onclick="changeGraph()">Power of Connection</button>
<script>

function getRandomColor() {
  var letters = '0123456789ABCDEF';
  var color = '#';
  for (var i = 0; i < 6; i++) {
    color += letters[Math.floor(Math.random() * 16)];
  }
  return color;
}

// set the dimensions and margins of the graph
var margin = {top: 30, right: 30, bottom: 60, left: 60},
    width = 500 - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

// Read the data
d3.csv("https://ruchanandha.github.io/report.csv", function(data) {

  // Add X axis
  var x = d3.scaleLinear()
    .domain([0, 16]) // Adjust the domain to match your data range
    .range([0, width]);
  svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, 1]) // Adjust the domain to match your data range
    .range([height, 0]);
  svg.append("g")
    .call(d3.axisLeft(y));
   
  // Add x-axis label
  svg.append("text")
    .attr("x", width / 2)
    .attr("y", height + 40)
    .style("text-anchor", "middle")
    .text("Log GDP per capita");

  // Add y-axis label
  svg.append("text")
    .attr("transform", "rotate(-90)")
    .attr("x", -height / 2)
    .attr("y", -40)
    .style("text-anchor", "middle")
    .text("Positive affect");

  // Add title label
  svg.append("text")
    .attr("x", width / 2)
    .attr("y", -margin.top / 2)
    .style("text-anchor", "middle")
    .style("font-size", "18px")
    .text("Scatterplot of Log GDP per capita vs. Positive affect");

  // Add dots
  svg.append('g')
    .selectAll("dot")
    .data(data)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(d["Log GDP per capita"]); })
      .attr("cy", function (d) { return y(d["Positive affect"]); })
      .attr("r", 4) 
      .style("fill", function() { return getRandomColor(); })
      .on("mouseover", function(d) {
        tooltip.text("Country: " + d["Country name"] + ", Year " + d["Year"] + ", Log GDP per capita: " + d["Log GDP per capita"] + ", Positive affect: " + d["Positive affect"])
               .style("visibility", "visible");
      })
      .on("mousemove", function() {
        tooltip.style("top", (d3.event.pageY - 10) + "px").style("left", (d3.event.pageX + 10) + "px");
      })
      .on("mouseout", function() {
        tooltip.style("visibility", "hidden");
        });
});

// create a tooltip

var tooltip = d3.select("#my_dataviz")
  .append("div")
    .style("position", "absolute")
    .style("visibility", "hidden")
    .style("background-color", "white")
    .style("border", "1px solid #ccc")
    .style("padding", "5px");

</script>
</body>
</html>